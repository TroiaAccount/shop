<section class="page__order order main-wrapper clerfix">
   <div class="order__wrapper d-flex flex-column">
      <div id="client-info" class="widget-list row mt-4">
         <div class="col d-flex justify-content-start" style="max-width: 150px;">
            <div class="col">
               <p>Сумма:</p>
            </div>
            <div class="col p-0">
               <p class="text-success">24.44</p>
            </div>
         </div>
         <div class="col d-flex ml-3" style="max-width: 300px;">
            <div class="col">
               <p>Статус:</p>
            </div>
            <div class="col p-0">
               <input type="text">
            </div>
         </div>
         <div class="col d-flex ml-3" style="max-width: 150px;">
            <div class="col">
               <p>Баланс:</p>
            </div>
            <div class="col p-0">
               <p class="text-danger">24.44</p>
            </div>
         </div>
         <div class="col d-flex ml-3" style="max-width: 300px;">
            <div class="col">
               <p>Номер телефона:</p>
            </div>
            <div class="col p-0">
               <p>+380680828856</p>
            </div>
         </div>
         <div class="col d-flex ml-3" style="max-width: 300px;">
            <div class="col">
               <p>Имя клиента:</p>
            </div>
            <div class="col p-0">
               <p>Василий Петрович</p>
            </div>
         </div>
      </div>
      <div class="order__header container-fluid pt-1">
         <div class="widget-list row">
            <div class="widget-holder widget-sm col" style="max-width: 65px;">
               <div class="widget-bg bg-transparent text-inverse number mb-2" style="height: 70px;">
                  <div class="widget-body p-0" style="height: 70px;">
                     <div class="-w-info media">
                        <div class="media-body w-50">
                           <p class="text-muted mr-b-5 fw-600"></p><span class="-title d-block"><span class=""></span></span>
                        </div>
                     </div>
                  </div>
               </div>
            </div>
            <div class="widget-holder widget-sm col">
                  <div class="widget-bg bg-danger text-inverse mb-2">
                     <div class="widget-body">
                        <div class="-w-info media">
                           <div class="media-body w-50">
                              <p class="text-muted mr-b-5 fw-600">Фото товара</p><span class="-title d-block"><span class=""></span></span>
                           </div>
                        </div>
                     </div>
                  </div>
            </div>
            <div class="widget-holder widget-sm col">
                  <div class="widget-bg bg-danger text-inverse mb-2">
                     <div class="widget-body">
                        <div class="-w-info media">
                           <div class="media-body w-50">
                              <p class="text-muted mr-b-5 fw-600">Ссылка на фото</p><span class="-title d-block"><span class=""></span></span>
                           </div>
                        </div>
                     </div>
                  </div>
            </div>
            <div class="widget-holder widget-sm col">
                  <div class="widget-bg bg-danger text-inverse mb-2">
                     <div class="widget-body">
                        <div class="-w-info media">
                           <div class="media-body w-50">
                              <p class="text-muted mr-b-5 fw-600">Ссылка на товар</p><span class="-title d-block"><span class=""></span></span>
                           </div>
                        </div>
                     </div>
                  </div>
            </div>
            
            <div class="widget-holder widget-sm col">
                  <div class="widget-bg bg-danger mb-2">
                     <div class="widget-body text-inverse">
                        <div class="-w-info media">
                           <div class="media-body w-50">
                              <p class="text-muted mr-b-5 fw-600">Кол-во штук</p><span class="-title d-block"><span class=""></span></span>
                           </div>
                        </div>
                     </div>
                  </div>
            </div>
            <div class="widget-holder widget-sm col">
               <div class="widget-bg bg-danger mb-2">
                  <div class="widget-body bg-danger text-inverse">
                     <div class="-w-info media">
                        <div class="media-body w-50">
                           <p class="text-muted mr-b-5 fw-600">Цена</p><span class="-title d-block"><span class=""></span></span>
                        </div>
                     </div>
                  </div>
               </div>
            </div>
            <div class="widget-holder widget-sm col">
               <div class="widget-bg bg-danger text-inverse mb-2">
                  <div class="widget-body">
                     <div class="-w-info media">
                        <div class="media-body w-50">
                           <p class="text-muted mr-b-5 fw-600">Цвет</p><span class="-title d-block"><span class=""></span></span>
                        </div>
                     </div>
                  </div>
               </div>
            </div>
            <div class="widget-holder widget-sm col">
               <div class="widget-bg bg-danger text-inverse mb-2">
                  <div class="widget-body">
                     <div class="-w-info media">
                        <div class="media-body w-50">
                           <p class="text-muted mr-b-5 fw-600">Размер</p><span class="-title d-block"><span class=""></span></span>
                        </div>
                     </div>
                  </div>
               </div>
            </div>
            <div class="widget-holder widget-sm col">
               <div class="widget-bg bg-danger text-inverse mb-2">
                  <div class="widget-body">
                     <div class="-w-info media">
                        <div class="media-body w-50">
                           <p class="text-muted mr-b-5 fw-600">Модель</p>
                        </div>
                     </div>
                  </div>
               </div>
            </div>
            <div class="widget-holder widget-sm col">
               <div class="widget-bg bg-success text-inverse mb-2">
                  <div class="widget-body">
                     <div class="-w-info media">
                        <div class="media-body w-50">
                           <p class="text-muted mr-b-5 fw-600">Кол-во шт. наличие</p>
                        </div>
                     </div>
                  </div>
               </div>
            </div>
            <div class="widget-holder widget-sm col">
               <div class="widget-bg bg-success text-inverse mb-2">
                  <div class="widget-body">
                     <div class="-w-info media">
                        <div class="media-body w-50">
                           <p class="text-muted mr-b-5 fw-600">Цена факт</p>
                        </div>
                     </div>
                  </div>
               </div>
            </div>
            <div class="widget-holder widget-sm col">
               <div class="widget-bg bg-success text-inverse mb-2">
                  <div class="widget-body">
                     <div class="-w-info media">
                        <div class="media-body w-50">
                           <p class="text-muted mr-b-5 fw-600">Комиссия %</p>
                        </div>
                     </div>
                  </div>
               </div>
            </div>
            <div class="widget-holder widget-sm col">
               <div class="widget-bg bg-success text-inverse mb-2">
                  <div class="widget-body">
                     <div class="-w-info media">
                        <div class="media-body w-50">
                           <p class="text-muted mr-b-5 fw-600">Доставка по Китаю</p>
                        </div>
                     </div>
                  </div>
               </div>
            </div>
            <div class="widget-holder widget-sm col">
               <div class="widget-bg bg-success text-inverse mb-2">
                  <div class="widget-body">
                     <div class="-w-info media">
                        <div class="media-body w-50">
                           <p class="text-muted mr-b-5 fw-600">Сумма</p>
                        </div>
                     </div>
                  </div>
               </div>
            </div>
            <div class="widget-holder widget-sm col">
               <div class="widget-bg bg-success text-inverse mb-2">
                  <div class="widget-body">
                     <div class="-w-info media">
                        <div class="media-body w-50">
                           <p class="text-muted mr-b-5 fw-600">Общий вес</p>
                        </div>
                     </div>
                  </div>
               </div>
            </div>
            <div class="widget-holder widget-sm col">
               <div class="widget-bg bg-success text-inverse mb-2">
                  <div class="widget-body">
                     <div class="-w-info media">
                        <div class="media-body w-50">
                           <p class="text-muted mr-b-5 fw-600">Общий объём</p>
                        </div>
                     </div>
                  </div>
               </div>
            </div>
            <div class="widget-holder widget-sm col">
               <div class="widget-bg bg-success text-inverse mb-2">
                  <div class="widget-body">
                     <div class="-w-info media">
                        <div class="media-body w-50">
                           <p class="text-muted mr-b-5 fw-600">Примечание</p>
                        </div>
                     </div>
                  </div>
               </div>
            </div>
            <div class="widget-holder widget-sm col">
               <div class="widget-bg bg-success text-inverse mb-2">
                  <div class="widget-body">
                     <div class="-w-info media">
                        <div class="media-body w-50">
                           <p class="text-muted mr-b-5 fw-600">Статус</p>
                        </div>
                     </div>
                  </div>
               </div>
            </div>
            <div class="widget-holder widget-sm col">
               <div class="widget-bg bg-success text-inverse mb-2">
                  <div class="widget-body">
                     <div class="-w-info media">
                        <div class="media-body w-50">
                           <p class="text-muted mr-b-5 fw-600">Дата выкупа</p>
                        </div>
                     </div>
                  </div>
               </div>
            </div>
            <div class="widget-holder widget-sm col long-block">
               <div class="widget-bg bg-success text-inverse mb-2">
                  <div class="widget-body">
                     <div class="-w-info media">
                        <div class="media-body w-50">
                           <p class="text-muted mr-b-5 fw-600">Дата приход на склад в Китае</p>
                        </div>
                     </div>
                  </div>
               </div>
            </div>
            <div class="widget-holder widget-sm col">
               <div class="widget-bg bg-primary text-inverse mb-2">
                  <div class="widget-body">
                     <div class="-w-info media">
                        <div class="media-body w-50">
                           <p class="text-muted mr-b-5 fw-600">Фото с фабрики</p>
                        </div>
                     </div>
                  </div>
               </div>
            </div>
            <div class="widget-holder widget-sm col">
               <div class="widget-bg bg-primary text-inverse mb-2">
                  <div class="widget-body">
                     <div class="-w-info media">
                        <div class="media-body w-50">
                           <p class="text-muted mr-b-5 fw-600">Фотоотчет</p>
                        </div>
                     </div>
                  </div>
               </div>
            </div>
         </div>
      </div>
      <div class="order__body container-fluid mt-2">
         <div class="d-flex justify-content-between">
            <div>
               <div class="row">
                  <div class="col-6 d-flex flex-column justify-content-between">
                     <p>Логин клиента - номер заказа</p>
                     <div class="d-flex">
                        <p>Количество позиций товара:</p>
                        <input type="text">
                     </div>
                  </div>
                  <div class="col-6"></div>
               </div>
            </div>
            <div class="d-flex align-items-center">
               <p>Сумма заказа:</p>
               <input type="text">
            </div>
         </div>
      </div>
      <div class="order__footer pt-3">
         <div class="container-fluid">
            <div class="row page-title clearfix justify-content-end">
               <div>
                  <a onclick="makeOrder()" class="btn btn-block btn-outline-success btn-rounded ripple hovered-btn dark">Сохранить</a>
               </div>
            </div>
         </div>
      </div>
</section>

<div class="modal modal-info fade bs-modal-md-info" tabindex="-1" role="dialog"
   aria-labelledby="myMediumModalLabel2" aria-hidden="true" style="display: none">
   <div class="modal-dialog modal-md">
      <div class="modal-content">
            <div class="modal-header text-inverse">
               <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
               <h5 class="modal-title" id="myMediumModalLabel2"></h5>
            </div>
            <div class="modal-body">
               <div class="d-flex flex-column modal-content-wrapper">
                  <div class="image">
                     <img src="{{asset('assets/admin/assets/img/no-image.png')}}" alt="">
                  </div>
                  <div class="file-input">
                     <div class="widget-list">
                        <div class="row">
                           <div class="col-md-12 widget-holder">
                              <div class="widget-bg">
                                 <div class="widget-body clearfix p-0 pt-3">
                                    <input type="file" class="customInput" id="file1" onchange="getImageUrl(event)">
                                    <label class="customInputLabel" for="file1">Выбрать фото</label>
                                 </div>
                                 <!-- /.widget-body -->
                              </div>
                              <!-- /.widget-bg -->
                           </div>
                     </div>
                  </div>
               </div>
            </div>
            <div class="modal-footer">
               <button type="button" class="btn btn-danger btn-rounded ripple text-left" onclick="resetLabelColor()"
                  data-dismiss="modal">Сохранить</button>
            </div>
      </div>
      <!-- /.modal-content -->
   </div>
   <!-- /.modal-dialog -->
</div>

<script>
   const href = window.location.href.split('/'),
         _page_id = href[href.length - 1];

   window.addEventListener('DOMContentLoaded', async () => {
      let data = await getData(_page_id);
      data = await JSON.parse(data.data);  

      const container = document.querySelector('.order__header');
      data.forEach((product, i) => {
         const row = document.createElement('div');
         row.classList.add('widget-list', 'row', 'orderRow');
         row.innerHTML = `
               <div class="widget-holder widget-sm col" style="max-width: 65px;">
                  <div class="widget-bg bg-transparent text-inverse number mb-2">
                     <div class="widget-body p-0">
                        <div class="-w-info media">
                           <div class="media-body w-50">
                              <p class="text-muted mr-b-5 fw-600"></p><span class="-title d-block"><span class=""></span></span>
                           </div>
                        </div>
                     </div>
                  </div>
                  <div class="widget-bg bg-transparent text-inverse mt-2">
                     <div class="widget-body p-0">
                        <div class="-w-info media number">
                           <div class="media-body w-100">
                              <div class="rounded-card bg-light">
                                 <p class="text-dark fw-600 m-0">${i + 1}</p>
                              </div>
                           </div>
                        </div>
                     </div>
                  </div>
               </div>
               <div class="widget-holder widget-sm col" name="photo-${i + 1}">
                     <div class="widget-bg bg-transparent text-inverse mt-2">
                        <div class="widget-body p-0">
                           <div class="-w-info media">
                              <div class="media-body w-100">
                                 <a class="btn btn-danger w-100" data-row="${i}" data-url="${product.Photo[0] ? product.Photo[0] : ''}" data-state="photosUrl">Посмотреть</a>
                              </div>
                           </div>
                        </div>
                     </div>
               </div>
               <div class="widget-holder widget-sm col" name="photoUrl-${i + 1}">
                     <div class="widget-bg bg-transparent text-inverse mt-2">
                        <div class="widget-body p-0">
                           <div class="-w-info media">
                              <div class="media-body w-100">
                                 <div class="rounded-card bg-danger d-flex flex-column justify-content-between url-input-wrapper">
                                    <input class="url-input bg-danger" type="text" name="imageUrl" value="${product.PhotoUrl[0] ? product.PhotoUrl[0] : ''}"> 
                                 </div>
                              </div>
                           </div>
                        </div>
                     </div>
               </div>
               <div class="widget-holder widget-sm col" name="productUrl-${i + 1}">
                     <div class="widget-bg bg-transparent text-inverse mt-2">
                        <div class="widget-body p-0">
                           <div class="-w-info media">
                              <div class="media-body w-100">
                                 <div class="rounded-card bg-danger d-flex flex-column justify-content-between url-input-wrapper">
                                    <input class="url-input bg-danger" type="text" name="url" value="${product.ProductUrl[0] ? product.ProductUrl[0] : ''}"> 
                                 </div>
                              </div>
                           </div>
                        </div>
                     </div>
               </div>
               <div class="widget-holder widget-sm col">
                     <div class="widget-bg bg-transparent text-inverse mt-2">
                        <div class="widget-body p-0">
                           <div class="-w-info media">
                              <div class="media-body w-100">
                                 <div class="rounded-card bg-danger d-flex flex-column justify-content-between">
                                    <input class="url-input bg-danger text-muted text-center" type="text" name="count" value="${product.count ? product.count : ''}"> 
                                 </div>
                              </div>
                           </div>
                        </div>
                     </div>
               </div>
               <div class="widget-holder widget-sm col">
                  <div class="widget-bg bg-transparent text-inverse mt-2">
                     <div class="widget-body p-0">
                        <div class="-w-info media">
                           <div class="media-body w-100">
                              <div class="rounded-card bg-danger d-flex flex-column justify-content-between">
                                 <input class="url-input bg-danger text-muted text-center" type="text" name="cost" value="${product.cost ? product.cost : ''}"> 
                              </div>
                           </div>
                        </div>
                     </div>
                  </div>
               </div>
               <div class="widget-holder widget-sm col">
                  <div class="widget-bg bg-transparent text-inverse mt-2">
                     <div class="widget-body p-0">
                        <div class="-w-info media">
                           <div class="media-body w-100">
                              <div class="rounded-card bg-danger d-flex flex-column justify-content-between">
                                 <input class="url-input bg-danger text-muted text-center" type="text" name="color" value="${product.color ? product.color : ''}"> 
                              </div>
                           </div>
                        </div>
                     </div>
                  </div>
               </div>
               <div class="widget-holder widget-sm col">
                  <div class="widget-bg bg-transparent text-inverse mt-2">
                     <div class="widget-body p-0">
                        <div class="-w-info media">
                           <div class="media-body w-100">
                              <div class="rounded-card bg-danger d-flex flex-column justify-content-between">
                                 <input class="url-input bg-danger text-muted text-center" type="text" name="size" value="${product.size ? product.size : ''}"> 
                              </div>
                           </div>
                        </div>
                     </div>
                  </div>
               </div>
               <div class="widget-holder widget-sm col">
                  <div class="widget-bg bg-transparent text-inverse mt-2">
                     <div class="widget-body p-0">
                        <div class="-w-info media">
                           <div class="media-body w-100">
                              <div class="rounded-card bg-danger d-flex flex-column justify-content-between">
                                 <input class="url-input bg-danger text-muted text-center" type="text" name="model" value="${product.model ? product.model : ''}"> 
                              </div>
                           </div>
                        </div>
                     </div>
                  </div>
               </div>
               <div class="widget-holder widget-sm col">
                  <div class="widget-bg bg-transparent text-inverse mt-2">
                     <div class="widget-body p-0">
                        <div class="-w-info media">
                           <div class="media-body w-100">
                              <div class="rounded-card bg-success d-flex flex-column justify-content-between">
                                 <input class="url-input bg-success text-muted text-center" type="text" name="availability" value="${product.availability ? product.availability : ''}"> 
                              </div>
                           </div>
                        </div>
                     </div>
                  </div>
               </div>
               <div class="widget-holder widget-sm col">
                  <div class="widget-bg bg-transparent text-inverse mt-2">
                     <div class="widget-body p-0">
                        <div class="-w-info media">
                           <div class="media-body w-100">
                              <div class="rounded-card bg-success d-flex flex-column justify-content-between">
                                 <input class="url-input bg-success text-muted text-center" type="text" name="priceFact" value="${product.priceFact ? product.priceFact : ''}"> 
                              </div>
                           </div>
                        </div>
                     </div>
                  </div>
               </div>
               <div class="widget-holder widget-sm col">
                  <div class="widget-bg bg-transparent text-inverse mt-2">
                     <div class="widget-body p-0">
                        <div class="-w-info media">
                           <div class="media-body w-100">
                              <div class="rounded-card bg-success d-flex flex-column justify-content-between">
                                 <input class="url-input bg-success text-muted text-center" type="text" name="commission" value="${product.commission ? product.commission : ''}"> 
                              </div>
                           </div>
                        </div>
                     </div>
                  </div>
               </div>
               <div class="widget-holder widget-sm col">
                  <div class="widget-bg bg-transparent text-inverse mt-2">
                     <div class="widget-body p-0">
                        <div class="-w-info media">
                           <div class="media-body w-100">
                              <div class="rounded-card bg-success d-flex flex-column justify-content-between">
                                 <input class="url-input bg-success text-muted text-center" type="text" name="chinaDelivery" value="${product.chinaDelivery ? product.chinaDelivery : ''}"> 
                              </div>
                           </div>
                        </div>
                     </div>
                  </div>
               </div>
               <div class="widget-holder widget-sm col">
                  <div class="widget-bg bg-transparent text-inverse mt-2">
                     <div class="widget-body p-0">
                        <div class="-w-info media">
                           <div class="media-body w-100">
                              <div class="rounded-card bg-success d-flex flex-column justify-content-between">
                                 <input class="url-input bg-success text-muted text-center" type="text" name="sum" value="${product.sum ? product.sum : ''}"> 
                              </div>
                           </div>
                        </div>
                     </div>
                  </div>
               </div>
               <div class="widget-holder widget-sm col">
                  <div class="widget-bg bg-transparent text-inverse mt-2">
                     <div class="widget-body p-0">
                        <div class="-w-info media">
                           <div class="media-body w-100">
                              <div class="rounded-card bg-success d-flex flex-column justify-content-between">
                                 <input class="url-input bg-success text-muted text-center" type="text" name="weight" value="${product.weight ? product.weight : ''}"> 
                              </div>
                           </div>
                        </div>
                     </div>
                  </div>
               </div>
               <div class="widget-holder widget-sm col">
                  <div class="widget-bg bg-transparent text-inverse mt-2">
                     <div class="widget-body p-0">
                        <div class="-w-info media">
                           <div class="media-body w-100">
                              <div class="rounded-card bg-success d-flex flex-column justify-content-between">
                                 <input class="url-input bg-success text-muted text-center" type="text" name="volume" value="${product.volume ? product.volume : ''}"> 
                              </div>
                           </div>
                        </div>
                     </div>
                  </div>
               </div>
               <div class="widget-holder widget-sm col">
                  <div class="widget-bg bg-transparent text-inverse mt-2">
                     <div class="widget-body p-0">
                        <div class="-w-info media">
                           <div class="media-body w-100">
                              <div class="rounded-card bg-success d-flex flex-column justify-content-between">
                                 <input class="url-input bg-success text-muted text-center" type="text" name="note" value="${product.note ? product.note : ''}"> 
                              </div>
                           </div>
                        </div>
                     </div>
                  </div>
               </div>
               <div class="widget-holder widget-sm col">
                  <div class="widget-bg bg-transparent text-inverse mt-2">
                     <div class="widget-body p-0">
                        <div class="-w-info media">
                           <div class="media-body w-100">
                              <div class="rounded-card bg-success d-flex flex-column justify-content-between">
                                 <input class="url-input bg-success text-muted text-center" type="text" name="status" value="${product.status ? product.status : ''}"> 
                              </div>
                           </div>
                        </div>
                     </div>
                  </div>
               </div>
               <div class="widget-holder widget-sm col">
                  <div class="widget-bg bg-transparent text-inverse mt-2">
                     <div class="widget-body p-0">
                        <div class="-w-info media">
                           <div class="media-body w-100">
                              <div class="rounded-card bg-success d-flex flex-column justify-content-between">
                                 <input class="url-input bg-success text-muted text-center" type="text" name="buyoutDate" value="${product.buyoutDate ? product.buyoutDate : ''}"> 
                              </div>
                           </div>
                        </div>
                     </div>
                  </div>
               </div>
               <div class="widget-holder widget-sm col long-block">
                  <div class="widget-bg bg-transparent text-inverse mt-2">
                     <div class="widget-body p-0">
                        <div class="-w-info media">
                           <div class="media-body w-100">
                              <div class="rounded-card bg-success d-flex flex-column justify-content-between">
                                 <input class="url-input bg-success text-muted text-center" type="text" name="chinaDate" value="${product.chinaDate ? product.chinaDate : ''}"> 
                              </div>
                           </div>
                        </div>
                     </div>
                  </div>
               </div>
               <div class="widget-holder widget-sm col">
                  <div class="widget-bg bg-transparent text-inverse mt-2">
                     <div class="widget-body p-0">
                        <div class="-w-info media">
                           <div class="media-body w-100">
                              <a class="btn btn-primary w-100" data-row="${i}" data-url="${product.PhotoFactory ? product.PhotoFactory[0] : ''}" data-state="photosFactory">Посмотреть</a>
                           </div>
                        </div>
                     </div>
                  </div>
               </div>
               <div class="widget-holder widget-sm col">
                  <div class="widget-bg bg-transparent text-inverse mt-2">
                     <div class="widget-body p-0">
                        <div class="-w-info media">
                           <div class="media-body w-100">
                              <a class="btn btn-primary w-100" data-row="${i}" data-url="${product.PhotoReport ? product.PhotoReport[0] : ''}" data-state="photosReport">Посмотреть</a>
                           </div>
                        </div>
                     </div>
                  </div>
               </div>
         `;

         container.append(row);

         const addWidget = (array, selector, textClass, name) => {
            if (array.length > 1) {
               const photoWrapper = document.querySelector(`[name="${selector}-${i + 1}"]`);
               for (let j = 1; j < array.length; j++) {
                  const widget = document.createElement('div');
                  widget.classList.add('widget-bg', 'bg-transparent', 'text-inverse', 'mt-2');
                  widget.innerHTML = `
                     <div class="widget-bg bg-transparent text-inverse mt-2 w-75">
                        <div class="widget-body p-0">
                           <div class="-w-info media">
                              <div class="media-body w-100 d-flex">
                                 <div class="rounded-card bg-danger d-flex flex-column justify-content-between url-input-wrapper text-right" style="padding: 4px 0.75rem;">
                                    <input class="url-input bg-danger ${textClass}" name="${name}" style="font-size: 13px" type="text" value="${array[j] ? array[j] : ''}"> 
                                 </div>
                              </div>
                           </div>
                        </div>
                     </div>
                  `
                  photoWrapper.append(widget);
               }
            }
         }

         addWidget(product.PhotoUrl, 'photoUrl', '', 'imageUrl');
         addWidget(product.ProductUrl, 'productUrl', 'text-dark', 'url');

         if (product.Photo.length > 1) {
            const photoWrapper = document.querySelector(`[name="photo-${i + 1}"]`);
            for (let j = 1; j < product.Photo.length; j++) {
               const widget = document.createElement('div');
               widget.classList.add('widget-bg', 'bg-transparent', 'text-inverse', 'mt-2');
               widget.innerHTML = `
                  <div class="widget-body p-0">
                     <div class="-w-info media">
                        <div class="media-body w-100 text-right position-relative">
                           <div class="rounded-card bg-light numeration position-absolute subnumeration">
                              <p class="text-dark fw-600 m-0">${i + 1}.${j}</p>
                           </div>
                           <a class="btn btn-danger w-75" style="font-size: 13px; padding: 5px 8px;" data-row="${i}" data-url="${product.Photo[j]}" data-state="photosUrl">Посмотреть</a>
                        </div>
                     </div>
                  </div>
               `
               photoWrapper.append(widget);
            }
         }

      })
      //При клике на инпут выделяется текст   
      const inputs = document.querySelectorAll('input');
      inputs.forEach(input => {
         input.addEventListener('click', () => input.select())
      })

      //Кнопки посмотреть фото
      const imgButtons = document.querySelectorAll('[data-url]');

      imgButtons.forEach(btn => {
         btn.addEventListener('click', () => openModalWithImg(btn.dataset.url, btn.dataset.row, btn.dataset.state));
      })
   })
//Получаем информацию о заказе
   async function getData(id) {
      const body = { order_id: id };
      return await postData("{{Route('read_orders_SelectOrder')}}", body);
   }
//Вставляем в тег дефолт картинку
   function pasteNoImage(imgTag) {
      imgTag.src = '{{asset('assets/admin/assets/img/no-image.png')}}';
   }
//Вставляем в тег картинку по url
   function changeModalImg(imgTag, url) {
      imgTag.addEventListener('error', () => pasteNoImage(imgTag));
      imgTag.src = url;
   }
//Открываем модалку с переданной картинкой
   function openModalWithImg(url, id, state) {
      const imgTag = document.querySelector('.image img');
      const imgInput = document.querySelector('#file1');
      imgInput.dataset.state = state;

      if (!url) {
         pasteNoImage(imgTag);
         openModal();
         setAttributeBySelector('#file1', 'name', id);
         return;
      }
      changeModalImg(imgTag, url);
      openModal();
      setAttributeBySelector('#file1', 'name', id);
   }
   
   function resetLabelColor() {
      const label = document.querySelector('.customInputLabel');
      label.style.background = 'none';
   }

//Постим на сервер загруженную картинку и получаем ее url
   const photosUrl = {};
   const photosFactory = {};
   const photosReport = {};

   async function getImageUrl(e) {
      const file = e.target.files[0];
      const _token = document.querySelector('[name="_token"]').value;
      const formData = new FormData();
      formData.append('image', file);
      formData.append('_token', _token);
      const res = await postFormData('{{Route("UploadOrderPhoto")}}', formData);
      const id = e.target.getAttribute('name');
      const state = e.target.dataset.state;
      console.log(state);
      let array;
      switch (state) {
         case 'photosUrl':
            array = photosUrl;
            break;
         case 'photosFactory':
            array = photosFactory;
            break;
         case 'photosReport':
            array = photosReport;
            break;
         default:
            break;
      }
      if (array[id]) {
         array[id] = [...array[id], res.url];
      } else {
         array[id] = [res.url];
      }
      console.log('Успешно создан: ', JSON.stringify(res));
      e.target.nextElementSibling.style.backgroundColor = '#ecffc6';
      e.target.value = '';
   }
//Собираем заказ и отправляем на сервер
   function makeOrder() {
      const orderRows = document.querySelectorAll('.orderRow'),
            dataToServer = {id: _page_id, json: []};

      orderRows.forEach((order, i) => {
         const data = {},
               photo = [],
               photoFactory = [],
               photoReport = [],
               urlPhotos = [],
               urlProducts = [],
               urlPhotoInputs = order.querySelectorAll('[name="imageUrl"]'),
               urlProductInputs = order.querySelectorAll('[name="url"]'),
               count = order.querySelector('[name="count"]').value,
               cost = order.querySelector('[name="cost"]').value,
               color = order.querySelector('[name="color"]').value,
               size = order.querySelector('[name="size"]').value,
               model = order.querySelector('[name="model"]').value,
               //green
               availability = order.querySelector('[name="availability"]').value,
               priceFact = order.querySelector('[name="priceFact"]').value,
               commission = order.querySelector('[name="commission"]').value,
               chinaDelivery = order.querySelector('[name="chinaDelivery"]').value,
               sum = order.querySelector('[name="sum"]').value,
               weight = order.querySelector('[name="weight"]').value,
               volume = order.querySelector('[name="volume"]').value,
               note = order.querySelector('[name="note"]').value,
               status = order.querySelector('[name="status"]').value,
               buyoutDate = order.querySelector('[name="buyoutDate"]').value,
               chinaDate = order.querySelector('[name="chinaDate"]').value;


         const makeData = (inputs, array, fieldName) => {
            data[fieldName] = array;
            inputs.forEach(input => {
               data[fieldName].push(input.value);
            })
         }

         const pushPhotosToArray = (photos, array) => {
            if (photos[i]) {
               photos[i].forEach(url => {
                  array.push(url);
               })
            }
         }

         makeData(urlPhotoInputs, urlPhotos, 'PhotoUrl');
         makeData(urlProductInputs, urlProducts, 'ProductUrl');
         pushPhotosToArray(photosUrl, photo);
         pushPhotosToArray(photosFactory, photoFactory);
         pushPhotosToArray(photosReport, photoReport);

         if (photo) {
            data['Photo'] = photo;
         }
         if (photoFactory) {
            data['PhotoFactory'] = photoFactory;
         }
         if (photoReport) {
            data['PhotoReport'] = photoReport;
         }
         data['count'] = parseInt(count);
         data['cost'] = parseInt(cost);
         data['color'] = color;
         data['size'] = size;
         data['model'] = model;
         //green
         data['availability'] = availability;
         data['priceFact'] = priceFact;
         data['commission'] = commission;
         data['chinaDelivery'] = chinaDelivery;
         data['sum'] = sum;
         data['weight'] = weight;
         data['volume'] = volume;
         data['note'] = note;
         data['status'] = status;
         data['buyoutDate'] = buyoutDate;
         data['chinaDate'] = chinaDate;
         dataToServer['json'].push(data);
      })

      postData('{{Route("ReplaceOrder")}}', dataToServer)
            .then(res => {
               if (res.status === true) {
                  console.log('Успешно создан: ', JSON.stringify(res));
                  // window.location.href = '{{Route('AdminPage', ['page' => 'orders'])}}'
               }
            });
   }
</script>